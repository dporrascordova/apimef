
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<div ng-controller="ReportesController">
	<uib-tabset active="active"> 
    <uib-tab index="0" select="searchUsuario()"> <uib-tab-heading>
	Usuarios </uib-tab-heading>
	<div class="tab-content" style="margin: 0px; padding: 0px;">
		<form [formGroup]="searchCriteria" ng-submit="searchUsuario()"
			class="text-sm">
			<div class="row">
				<div class="col-sm-12 inline-container-Group"
					style="margin-top: 10px; padding: 10px; border: 1px solid #d5d5d5">
					<p class="modal-title"
						style="color: #999; font-size: 15px; margin-bottom: 5px; margin-top: -5px">
						Criterios de búsqueda:</p>
					<fieldset style="width: 100%;">
						<div class="row">

							<label class="col-sm-2 control-label"
								style="margin-top: 5px; text-align: right;">Nombres / Razón Social </label>
							<div class="col-sm-2">
								<input class="form-control" name="nombretab2"
									ng-model="model.nombretab2" minlength="0" maxlength="100"
									placeholder="Nombres " style="width: 100%" type="text" value="">
							</div>


							<label class="col-sm-2 control-label"
								style="margin-top: 5px; text-align: right;">Estado: </label>
							<div class="col-sm-2">
								<select name="estadotab2" id="estadotab2" class="form-control"
									ng-model="model.estadotab2">
									<option value="" selected>-- Todos --</option>
									<option value="1">Activo</option>
									<option value="0">Inactivo</option>

								</select>
							</div>


							<label class="col-sm-2 control-label"
								style="margin-top: 5px; text-align: right;">Teléfono: </label>
							<div class="col-sm-2">
								<input class="form-control" name="telefonotab2"
									ng-model="model.telefonotab2" placeholder="Ej. 57665874"
									style="width: 100%" type="text" minlength="0" maxlength="15"
									ng-pattern="/^-?[0-9]\d*(\.\d+)?$/">
							</div>
						</div>

						<div class="row">
							<label class="col-sm-2 control-label"
								style="margin-top: 5px; text-align: right;">Tipo Usuario: </label>
							<div class="col-sm-2">
								<select name="personatab2" id="personatab2" class="form-control"
									ng-model="model.personatab2">
									<option value="0" selected>-- Todos --</option>
									<option value="1">Interno</option>
									<option value="2">Externo</option>
								</select>
							</div>

							<label class="col-sm-2 control-label"
								style="margin-top: 5px; text-align: right;">N°
								Documento: </label>
							<div class="col-sm-2">
								<input class="form-control" name="nro_documetotab2"
									ng-model="model.nro_documetotab2" maxlength="15"
									placeholder="N° Documento" type="text">
							</div>
							<label class="col-sm-2 control-label"
								style="margin-top: 5px; text-align: right;">Correo: </label>
							<div class="col-sm-2">
								<input class="form-control" minlength="0" maxlength="100"
									name="correotab2" ng-model="model.correotab2"
									placeholder="Ej. rony@vimero.io" style="width: 100%"
									type="text">
							</div>
						</div>
						
					<div class="row">
					
							<label class="col-sm-2 control-label"
								style="margin-top: 5px; text-align: right;">Tipo Documento: </label>
							<div class="col-sm-2">
								<select ng-model="model.Id_tipo_documento_tab2" name="Id_tipo_documento_tab2"
									id="Id_tipo_documento_tab2" class="form-control">
							        <option value="" selected>-- Todos --</option>
							         <option value="0">Ruc</option>
									<option value="1">Dni</option>
									<option value="2">Carnet Extranjeria</option>
							        <option value="3">Pasarporte</option>				
								</select>
							</div>
							
					  <label class="col-sm-2 control-label"
							style="margin-top: 5px; text-align: right;">Fecha Inicio:
						</label>
						<div class="col-sm-2">
							<input ng-model="model.fechaInicio_tab2" class="form-control"
								type="date" name="fechaInicio_tab2" max="9999-12-31">
						</div>

						<label class="col-sm-2 control-label"
							style="margin-top: 5px; text-align: right;">Fecha Fin: </label>
						<div class="col-sm-2">
							<input ng-model="model.fechaFin_tab2" class="form-control" type="date"
								name="fechaFin_tab2" max="9999-12-31">
						</div>
					
                      </div>
						
				
					
						<div class="row">
							<label class="col-sm-2 control-label"
								style="margin-top: 5px; text-align: right;">Celular: </label>
							<div class="col-sm-2">
								<input class="form-control" name="celulartab2" minlength="0"
									maxlength="15" placeholder="Ej. 990008575" style="width: 100%"
									type="text" ng-model="model.celulartab2">
							</div>


							<div class="col-sm-3" style="margin-right: 20px;">
								<button id="btnBuscarUsuario" class="btn btn-blue" type="submit">
									<i class="clip-search"></i>&nbsp; Buscar
								</button>

								<button class="btn btn-warning" type="button"
									ng-click="Limpiar(1);">
									<i class="clip-cancel-circle"></i>&nbsp; Limpiar
								</button>

							</div>

						</div>
					</fieldset>
				</div>
			</div>
		</form>
	</div>

	  <div class="row" style="margin: 0px; padding: 0px 0px 0px 10px;">
		  <button id="btnExportar" ng-click="exportarAExcel_Usuarios()" class="btn btn-dark-grey mt-3" type="button"><i
                class="clip-file-excel"></i>&nbsp; Exportar a Excel</button> 
	</div> 



	<div class="row">
		<div class="tab-content"
			style="margin: 0px; padding: 0px; width: 100%;">
			<div class="inline-container-Group p-0 mt-3 bg-white">
				<h2 class="grid-title">Listado de usuarios</h2>
				<!--<div class="col-sm-12 inline-container-Group">
            <p class="modal-title" style="color: #999; font-size: 15px; margin-bottom: 5px; margin-top: -5px">
                Listado de solicitudes para usuario </p>
        </div>-->
				<div class="table-responsive">
					<table class="table table-hover table-bordered">
						<thead>
							<tr>
								<th></th>
								<th class="text-center">Tipo Usuario</th>
								<th class="text-center">Persona</th>
								<th class="text-center">Nombres / Razón Social</th>
								<th class="text-center">Codigo Usuario</th>
								<th class="text-center">Nro Documento</th>
								<th class="text-center">Celular</th>
								<th class="text-center">Teléfono</th>
								<th class="text-center">Correo</th>
								<th class="text-center">Representante</th>
								<th class="text-center">Delegado</th>
								<th class="text-center">Fecha Activación</th>
								<th class="text-center">Fecha Desactivación</th>
								<th class="text-center">Usuario Aprobación</th>
								<th class="text-center">Fecha Aprobación</th>
								<th class="text-center">IP Creación</th>
								<th class="text-center">Departamento</th>
								<th class="text-center">Provincia</th>
								<th class="text-center">Distrito</th>
							</tr>
						</thead>
						<tr ng-repeat="item in dataUsuarios">
							<td>{{item.numreg}}</td>
							<td class="text-center">{{item.desc_tipo_usuario}}</td>
							<td class="text-center">{{item.desc_tipo_persona}}</td>
							<td class="text-center">{{item.nom_persona}}</td>
							<td class="text-center">{{item.cod_usuario}}</td>
							<td class="text-center">{{item.nro_documento}}</td>
							<td class="text-center">{{item.celular}}</td>
							<td class="text-center">{{item.telefono}}</td>
							<td class="text-center">{{item.correo}}</td>
							<td class="text-center">{{item.representante}}</td>
							<td class="text-center">{{item.delegado}}</td>			
							<td class="text-center">
							<span ng-bind="item.dfec_activacion | date : 'yyyy/MM/dd'" style="display:none"></span>{{item.fec_activacion}}</td>
							<td class="text-center">
							<span ng-bind="item.dfec_desactivacion | date : 'yyyy/MM/dd'" style="display:none"></span>{{item.fec_desactivacion}}</td>

							<td class="text-center">{{item.usu_creacion}}</td>
							<td class="text-center">
							<span ng-bind="item.dfec_creacion | date : 'yyyy/MM/dd HH:mm:ss Z'" style="display:none"></span> {{item.fec_creacion}}</td>
							 
							<td class="text-center">{{item.ip_creacion}}</td>
							<td class="text-center">{{item.departamento}}</td>
							<td class="text-center">{{item.provincia}}</td>
							<td class="text-center">{{item.distrito}}</td>

						</tr>
					</table>
				</div>
				<div ng-show="totalItems > 1" class="mt-3 row">
					<div class="col-md-7">
						<ul class="ml-2 mr-2" uib-pagination previous-text="Anterior"
							next-text="Siguiente" total-items="totalItems"
							ng-model="currentPage" max-size="maxSize"
							items-per-page="itemsPerPage" class="pagination-sm"
							boundary-link-numbers="true" rotate="false" ng-change="pageChanged()"></ul>
					</div>
				</div>
			</div>

		</div>
	</div>
    </uib-tab> 

   	<uib-tab index="1" select="searchSolDocumento()"> 
	<uib-tab-heading>
	Documentos
	<div ng-show="dataSolDocumento.length>0"
		style="width: 15px; margin-right: -10px; margin-top: -5px; border: none; border-radius: 50%; float: right; text-align: center; background-color: #e01e1e">
		<b style="color: #fff">{{ totalItemsDocumento }}</b>
	</div>
	</uib-tab-heading>
	<div class="inline-container-Group p-0 mt-3 bg-white">
		<form ng-submit="searchSolDocumento()" class="text-sm">
			<div class="col-sm-12 inline-container-Group"
				style="margin-top: 10px; padding: 10px; border: 1px solid #d5d5d5">
				<p class="modal-title"
					style="color: #999; font-size: 15px; margin-bottom: 5px; margin-top: -5px">
					Criterios de búsqueda:</p>
				<fieldset style="width: 100%;">
					<div class="row">
						<label class="col-sm-2 control-label"
							style="margin-top: 5px; text-align: right;">Estado: </label>
						<div class="col-sm-2">
							<select ng-model="modelDocumento.estado" name="estado"
								id="estado" class="form-control" >
								<option value="" selected>--Todos--</option>
								<option value="1" selected>Pendiente</option>
								<option value="4" selected>Subsanado</option>
								<option value="3" selected>Recibido</option>
								<option value="2" selected>Observado</option>
								<option value="5" selected>Atentidos</option>
								<option value="6" selected>Anulados</option>
							</select>

						</div>
						<label class="col-sm-2 control-label"
							style="margin-top: 5px; text-align: right;">Nro.
							Solicitud: </label>
						<div class="col-sm-2">
							<input class="form-control"
								ng-model="modelDocumento.numeroSolicitud" name="numeroSolicitud"
								maxlength="11" placeholder="Ej. 00002" style="width: 100%"
								type="text" value="">
						</div>

						<label class="col-sm-2 control-label"
							style="margin-top: 5px; text-align: right;">&Oacute;rgano
							destino: </label>
						<div class="col-sm-2">
							<select select2 ng-model="modelDocumento.organoDestino"
								name="organoDestino" class="form-control"
								data-placeholder="--Seleccione--" data-allow-clear="true">
								<option value="" selected>-- Todos --</option>
								<option data-ng-repeat="item in oficinas"
									value={{item.idunidad}}>{{item.descripcioncompleta}}</option>
							</select>
						</div>
					</div>

					<div class="row">
						<label class="col-sm-2 control-label"
							style="margin-top: 5px; text-align: right;">Fecha Inicio:
						</label>
						<div class="col-sm-2">
							<input ng-model="modelDocumento.fechaInicio" class="form-control"
								type="date" name="fechaInicio">
						</div>

						<label class="col-sm-2 control-label"
							style="margin-top: 5px; text-align: right;">Fecha Fin: </label>
						<div class="col-sm-2">
							<input ng-model="modelDocumento.fechaFin" class="form-control"
								type="date" name="fechaFin">
						</div>

						<label class="col-sm-2 control-label"
							style="margin-top: 5px; text-align: right; padding-left: 0px;">Tipo
							Documento: </label>
						<div class="col-sm-2">
							<select select2 class="form-control"
								ng-model="modelDocumento.tipoDocumento" name="tipoDocumento"
								data-placeholder="--Seleccione--" data-allow-clear="true">
								<option value="" selected>-- Todos --</option>
								<option data-ng-repeat="item in tipoDocumento"
									value={{item.id_tipodocumento}}>
									{{item.desc_tipodocumento}}</option>
							</select>
						</div>
					</div>

					<div class="row">
						<label class="col-sm-2 control-label"
							style="margin-top: 5px; text-align: right;">Nro.
							Documento: </label>
						<div class="col-sm-2">
							<input ng-model="modelDocumento.numeroDocumento"
								class="form-control" name="numeroDocumento" maxlength="50"
								placeholder="Ej. I008-500" style="width: 100%" type="text"
								value="">
						</div>
						<label class="col-sm-2 control-label"
							style="margin-top: 5px; text-align: right;">Asunto: </label>
						<div class="col-sm-2">
							<input ng-model="modelDocumento.asunto" class="form-control"
								maxlength="50" name="asunto" placeholder="Ej. Asunto"
								style="width: 100%" type="text" value="">
						</div>
						<label class="col-sm-2 control-label"
							style="margin-top: 5px; text-align: right;">Raz&oacute;n Social: </label>
						<div class="col-sm-2">
							<input ng-model="modelDocumento.RazonSocial" class="form-control"
								maxlength="50" name="RazonSocial" placeholder="Ej. Raz&oacute;n Social"
								style="width: 100%" type="text" value="">
						</div>
						
					</div>		
			 
					
				<div class="row">
				
			    	<label class="col-sm-2 control-label"
							style="margin-top: 5px; text-align: right;">Destino: </label>
						<div class="col-sm-2">
							<input ng-model="modelDocumento.Destino" class="form-control"
								maxlength="50" name="Destino" placeholder="Ej. Destino"
								style="width: 100%" type="text" value="">
						</div>
				
						<div class="col-sm-4">
							<button id="btnBuscar" class="btn btn-blue mr-1" type="submit">
								<i class="clip-search"></i>&nbsp; Buscar
							</button>
							<button class="btn btn-warning" type="button"
								ng-click="Limpiar(2);">
								<i class="clip-cancel-circle"></i>&nbsp; Limpiar
							</button>
						</div>
					</div>
					
					
				</fieldset>
			</div>
		</form>
		<div class="flex flex-row">
			<button ng-click="exportarAExcel_Documento()"
				class="btn btn-dark-grey mt-3 mb-1" type="button">
				<i class="clip-file-excel"></i>&nbsp; Exportar a Excel
			</button>
		</div>
		<div class="d-flex">
			<h2 class="grid-title">Listado de Solicitudes</h2>
			<div class="ml-auto col-lg-3 col-md-4 col-xs-12 p-2">
				<select select2 class="form-control" ng-model="modelDocumento.orden"
					multiple="multiple" ng-change="searchSolDocumento()"
					data-placeholder="--Seleccionar Orden--">
					<option></option>
					<option data-ng-repeat="item in orden" value={{item.valor}}>
						{{item.descripcion}}</option>
				</select>
			</div>
		</div>
		<div class="table-responsive">
			<table class="table table-hover">
				<thead>
					<tr>
						<th></th>
						<!-- <th class="text-center">Estado STD</th> -->
						<th class="text-center">Nro. Solicitud</th>
						<th class="text-center">Tipo Documento</th>
						<th>Nro. Documento</th>

						<th class="text-center">Nombre / Raz&oacute;n social</th>
						<th class="text-center">Fecha registro</th>
						<th class="text-center">&Oacute;rgano Destino</th>
						<th class="text-center">Estado</th>
						<th class="text-center">Hoja de Ruta Referencial</th>
						<th class="text-center">Hoja de Ruta</th>
					</tr>
				</thead>
				<tbody>
					<tr ng-repeat="request in dataSolDocumento">
						<td>{{ request.numreg }}</td>	
						<!-- <td class="text-center"></td> -->
						<td class="text-center">{{ request.id_documento }}</td>
						<td class="text-center">{{ request.desc_tipo_documento }}</td>
						<td>{{ request.nro_documento }}</td>

						<td class="text-center">{{ request.nombre_persona }}</td>
						<td class="text-center">{{ request.srt_fecha_creacion }}</td>
						<td class="text-center">{{ request.desc_oficina }}</td>
						<td class="text-center">{{ request.estado_documento }}</td>
						<td class="text-center">{{ request.hoja_ruta_referencial }}</td>
						<td class="text-center">{{ request.numero_sid }} - {{
							request.anio }}</td>
					</tr>
				</tbody>
			</table>
		</div>
		<div ng-show="totalItemsDocumento > 1" class="mt-3 row">
			<div class="col-md-7">
				<ul class="ml-2 mr-2" uib-pagination previous-text="Anterior"
					next-text="Siguiente" total-items="totalItemsDocumento"
					ng-model="currentPageDocumento" max-size="maxSize"
					items-per-page="itemsPerPage" class="pagination-sm"
					boundary-link-numbers="true" rotate="false"
					ng-change="pageChanged()"></ul>
			</div>
		</div>
	</div>
	</uib-tab> 
         
    </uib-tabset > 
    </div>
