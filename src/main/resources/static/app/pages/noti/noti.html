<div ng-controller="notiController">
	<uib-tabset active="active"> <uib-tab index="2"
		select="searchUsuario()"> <uib-tab-heading>
	Usuarios </uib-tab-heading>
	<div class="tab-content" style="margin: 0px; padding: 0px;">
		<form [formGroup]="searchCriteria" ng-submit="searchUsuario()"
			class="text-sm">
			<div class="row">
				<div class="col-sm-12 inline-container-Group"
					style="margin-top: 10px; padding: 10px; border: 1px solid #d5d5d5">
					<p class="modal-title"
						style="color: #999; font-size: 15px; margin-bottom: 5px; margin-top: -5px">
						Criterios de búsqueda:</p>
					<fieldset style="width: 100%;">
						<div class="row">

							<label class="col-sm-2 control-label"
								style="margin-top: 5px; text-align: right;">Nombres /
								Razón Social </label>
							<div class="col-sm-2">
								<input class="form-control" name="nombretab2"
									ng-model="modelusuarios.nombretab2" minlength="0"
									maxlength="100" placeholder="Nombres " style="width: 100%"
									type="text" value="">
							</div>


							<label class="col-sm-2 control-label"
								style="margin-top: 5px; text-align: right;">Tipo Documento: </label>
							<div class="col-sm-2">	
							  <select ng-model="modelusuarios.Id_tipo_documento_tab2" name="Id_tipo_documento_tab2"
									id="Id_tipo_documento_tab2" class="form-control">
									<option value="" selected>-- Todos --</option>
									 <option value="0">Ruc</option>
									<option value="1">Dni</option>
									<option value="2">Carnet Extranjeria</option>
								    <option value="3">Pasarporte</option>
					
								</select>							
							</div>
							<!-- <label class="col-sm-2 control-label"
								style="margin-top: 5px; text-align: right;">Estado: </label>
							<div class="col-sm-2">
								<select name="estadotab2" id="estadotab2" class="form-control"
									ng-model="modelusuarios.estadotab2">
									<option value="" selected>-- Todos --</option>
									<option value="1">Activo</option>
									<option value="0">Inactivo</option>

								</select>
							</div> -->


							<label class="col-sm-2 control-label"
								style="margin-top: 5px; text-align: right;">Télefono: </label>
							<div class="col-sm-2">
								<input class="form-control" name="telefonotab2"
									ng-model="modelusuarios.telefonotab2"
									placeholder="Ej. 57665874" style="width: 100%" type="text"
									minlength="0" maxlength="15"
									ng-pattern="/^-?[0-9]\d*(\.\d+)?$/">
							</div>
						</div>

						<div class="row">
							<label class="col-sm-2 control-label"
								style="margin-top: 5px; text-align: right;">Persona: </label>
							<div class="col-sm-2">
								<input class="form-control" value="Externo" maxlength="15"
									type="text" disabled>
								<!-- <select name="personatab2" id="personatab2" class="form-control" disabled
                                        ng-model="modelusuarios.personatab2"> 
                                        <option value="2">Externo</option>
                                    </select> -->
							</div>

							<label class="col-sm-2 control-label"
								style="margin-top: 5px; text-align: right;">N°
								Documento: </label>
							<div class="col-sm-2">
								<input class="form-control" name="nro_documetotab2"
									ng-model="modelusuarios.nro_documetotab2" maxlength="15"
									placeholder="N° Documento" type="text">
							</div>
							<label class="col-sm-2 control-label"
								style="margin-top: 5px; text-align: right;">Correo: </label>
							<div class="col-sm-2">
								<input class="form-control" minlength="0" maxlength="100"
									name="correotab2" ng-model="modelusuarios.correotab2"
									placeholder="Ej. rony@vimero.io" style="width: 100%"
									type="text">
							</div>
						</div>

						<div class="row">
							<label class="col-sm-2 control-label"
								style="margin-top: 5px; text-align: right;">Celular: </label>
							<div class="col-sm-2">
								<input class="form-control" name="celulartab2" minlength="0"
									maxlength="15" placeholder="Ej. 990008575" style="width: 100%"
									type="text" ng-model="modelusuarios.celulartab2">
							</div>


						  <label class="col-sm-2 control-label"
							style="margin-top: 5px; text-align: right;">Fecha Inicio:
						</label>
						<div class="col-sm-2">
							<input ng-model="modelusuarios.fechaInicio_tab2" class="form-control"
								type="date" name="fechaInicio_tab2" max="9999-12-31">
						</div>

						<label class="col-sm-2 control-label"
							style="margin-top: 5px; text-align: right;">Fecha Fin: </label>
						<div class="col-sm-2">
							<input ng-model="modelusuarios.fechaFin_tab2" class="form-control" type="date"
								name="fechaFin_tab2" max="9999-12-31">
						</div>
						

						</div>
						
						
						<div class="row">			
					
							
							  <div class="col-sm-4" style="margin-right: 20px;">
								<button id="btnBuscarUsuario" class="btn btn-blue" type="submit">
									<i class="clip-search"></i>&nbsp; Buscar
								</button>
								<button class="btn btn-warning" type="button"
									ng-click="Limpiar('3')">
									<i class="clip-cancel-circle"></i>&nbsp; Limpiar
								</button>

								<!-- <button id="btnLimpiar1" class="btn btn-secondary" type="button" ng-click="Limpiar('3')"  ><i
                                        class="clip-spinner-6"></i>&nbsp;
                                    Limpiar
                                </button> -->
							</div>
							
					  <!--  
						<label class="col-sm-2 control-label"
							style="margin-top: 5px; text-align: right;">N° Documento: </label>
				        <div class="col-sm-2">	
							<input ng-model="model.Numero_documento_tab2" class="form-control" type="text"
								name="Numero_documento_tab2" max="9999-12-31" placeholder="N° Documento usuario">
						</div> -->
							
		
                      </div>
						
						
			
						
					</fieldset>
				</div>
			</div>
		</form>
	</div>

	<div class="row" style="margin: 0px; padding: 0px 0px 0px 10px;">
		<button id="btn_Nuevo1" style="margin-right: 5px;"
			ng-click="EnviarNoti_Usuarios()" class="btn btn-red mt-3"
			type="button">
			<i class="fa fa-envelope"></i>&nbsp; Enviar Notificación
		</button>

	</div>



	<div class="row">
		<div class="tab-content"
			style="margin: 0px; padding: 0px; width: 100%;">
			<div class="inline-container-Group p-0 mt-3 bg-white">
				<h2 class="grid-title">Listado de usuarios</h2>
				<!--<div class="col-sm-12 inline-container-Group">
            <p class="modal-title" style="color: #999; font-size: 15px; margin-bottom: 5px; margin-top: -5px">
                Listado de solicitudes para usuario </p>
        </div>-->
				<div class="table-responsive">
					<table class="table table-hover table-bordered">
						<thead>
							<tr>
								<th></th>
								<th><input type="checkbox" value=""
									ng-click="SelecAllcheckusuarios(event)" id="check_piusuaarios">
								</th>

								<th class="text-center">Tipo Usuario</th>
								<th class="text-center">Persona</th>
								<th class="text-center">Nombres / Razón Social</th>
								<th class="text-center">Nro Documento</th>
								<th class="text-center">Celular</th>
								<th class="text-center">Telefono</th>
								<th class="text-center">Correo</th>
								<th class="text-center">Fecha Activación</th>
								<th class="text-center">Fecha Desactivación</th>
								<th class="text-center">Usuario Creacion</th>
								<th class="text-center">Fecha Creacion</th>
								<th class="text-center">IP Creacion</th>
							</tr>
						</thead>
						<tr ng-repeat="item in dataUsuarios">
							<td>{{ item.numreg}}</td>

							<td class="text-center"><input type="checkbox"
								value="{{item.id_usuario}}-{{item.id_persona}}"
								name="check_noti"></td>

							<td class="text-center">{{item.desc_tipo_usuario}}</td>
							<td class="text-center">{{item.desc_tipo_persona}}</td>
							<td class="text-center">{{item.nom_persona}}</td>
							<td class="text-center">{{item.nro_documento}}</td>
							<td class="text-center">{{item.celular}}</td>
							<td class="text-center">{{item.telefono}}</td>
							<td class="text-center">{{item.correo}}</td>
							<td class="text-center">{{item.fec_activacion}}</td>
							<td class="text-center">{{item.fec_desactivacion}}</td>

							<td class="text-center">{{item.usu_creacion}}</td>
							<td class="text-center"><span
								ng-bind="item.dfec_creacion | date : 'yyyy/MM/dd'"
								style="display: none"></span>{{item.fec_creacion}}</td>
							<td class="text-center">{{item.ip_creacion}}</td>
						</tr>
					</table>
				</div>
				<div ng-show="totalItems > 1" class="mt-3 row">
					<div class="col-md-7">
						<ul class="ml-2 mr-2" uib-pagination previous-text="Anterior"
							next-text="Siguiente" total-items="totalItems"
							ng-model="currentPage" max-size="maxSize"
							items-per-page="itemsPerPage" class="pagination-sm"
							boundary-link-numbers="true" rotate="false" ng-change="pageChanged()"></ul>
					</div>
				</div>
			</div>

		</div>
	</div>
	</uib-tab> <uib-tab index="1" select="searchEnviados()"> <uib-tab-heading>
	Notificaciones Enviados </uib-tab-heading>


	<div class="tab-content" style="margin: 0px; padding: 0px;">
		<form [formGroup]="searchCriteria" ng-submit="searchEnviados()"
			class="text-sm">
			<div class="row">
				<div class="col-sm-12 inline-container-Group"
					style="margin-top: 10px; padding: 10px; border: 1px solid #d5d5d5">
					<p class="modal-title"
						style="color: #999; font-size: 15px; margin-bottom: 5px; margin-top: -5px">
						Criterios de búsqueda:</p>
					<fieldset style="width: 100%;">
						<div class="row">



							<label class="col-sm-2 control-label"
								style="margin-top: 5px; text-align: right;">Destinatario:
							</label>
							<div class="col-sm-2">
								<input class="form-control" name="destinatario"
									ng-model="model2.destinatario" placeholder="Ej. xxxxxxx"
									style="width: 100%" type="text" minlength="0" maxlength="100">
							</div>


							<label class="col-sm-2 control-label"
								style="margin-top: 5px; text-align: right;">Tipo
								Documento: </label>
							<div class="col-sm-2">
								<select class="form-control" ng-model="model2.tipoDocumento"
									name="tipoDocumento">
									<option value="" selected>-- Todos --</option>
									<option data-ng-repeat="item in tipoDocumentoTab2"
										value={{item.id_tipodocumento}}>
										{{item.desc_tipodocumento}}</option>
								</select>
							</div>

							<label class="col-sm-2 control-label"
								style="margin-top: 5px; text-align: right;">N°
								Documento: </label>
							<div class="col-sm-2">
								<input ng-model="model2.nro_documeto" class="form-control"
									name="nro_documeto" maxlength="11" placeholder="Ej. 556757"
									type="text">
							</div>


						</div>

						<div class="row">




							<label class="col-sm-2 control-label"
								style="margin-top: 5px; text-align: right; padding-left: 0px;">Correo
								Electronico: </label>
							<div class="col-sm-2">
								<input ng-model="model2.correo" class="form-control"
									name="correo" maxlength="50" placeholder="Ej. xxx@xx"
									type="text">
							</div>


							<label class="col-sm-2 control-label"
								style="margin-top: 5px; text-align: right;">Órgano
								emisor: </label>
							<div class="col-sm-2">
								<select ng-model="model2.organoDestino" name="organoDestino"
									class="form-control">
									<option value="" selected>-- Todos --</option>
									<option data-ng-repeat="item in oficinasTab2"
										value={{item.idunidad}}>{{item.descripcioncompleta}}
									</option>
								</select>
							</div>


							<label class="col-sm-2 control-label"
								style="margin-top: 5px; text-align: right;">Estado: </label>
							<div class="col-sm-2">
								<select ng-model="model2.estado" name="estado" id="estado"
									class="form-control">
									<option value="" selected>-- Todos --</option>
									<option value="1">Leido</option>
									<option value="0">No Liedo</option>
								</select>
							</div>

						</div>

						<div class="row">
						
							<label class="col-sm-2 control-label"
								style="margin-top: 5px; text-align: right; padding-left: 0px;">Nro. Solicitud: </label>
							<div class="col-sm-2">
								<input ng-model="model2.nro_solicitud" class="form-control"
									name="nro_solicitud" maxlength="50" placeholder="Ej. 45466"
									type="text">
							</div>
						
							<label class="col-sm-2 control-label"
								style="margin-top: 5px; text-align: right;">Fecha
								Inicio: </label>
							<div class="col-sm-2">
								<input ng-model="model2.fechaInicio" class="form-control"
									type="date" name="fechaInicio" max="9999-12-31">
							</div>

							<label class="col-sm-2 control-label"
								style="margin-top: 5px; text-align: right;">Fecha Fin: </label>
							<div class="col-sm-2">
								<input ng-model="model2.fechaFin" class="form-control"
									type="date" name="fechaFin" max="9999-12-31">
							</div>


					
						</div>
						<div class="row">
							<label class="col-sm-2 control-label"
								style="margin-top: 5px; text-align: right; padding-left: 0px;">Hoja Ruta: </label>
							<div class="col-sm-2">
								<input ng-model="model2.hoja_ruta" class="form-control"
									name="hoja_ruta" maxlength="50" placeholder="Ej. 011263-2022"
									type="text">
							</div>
							<label class="col-sm-2 control-label"
								style="margin-top: 5px; text-align: right; padding-left: 0px;">Hoja Envio: </label>
							<div class="col-sm-2">
								<input ng-model="model2.hoja_envio" class="form-control"
									name="hoja_envio" maxlength="50" placeholder="Ej. 011263-2022"
									type="text">
							</div>
								<div class="col-sm-3" style="margin-right: 20px;">
								<button id="btnBuscar2" class="btn btn-blue" type="submit">
									<i class="clip-search"></i>&nbsp; Buscar
								</button>
								<button class="btn btn-warning" type="button"
									ng-click="Limpiar('2')">
									<i class="clip-cancel-circle"></i>&nbsp; Limpiar
								</button>
							</div>
						</div>
						
					</fieldset>
				</div>
			</div>
		</form>
	</div>

	<div class="row" style="margin: 0px; padding: 0px 0px 0px 10px;">

		<button id="btnExportar" ng-click="exportarExcel2()"
			class="btn btn-dark-grey mt-3" type="button">
			<i class="clip-file-excel"></i>&nbsp; Exportar a Excel
		</button>
	</div>



	<div class="row">
		<div class="tab-content"
			style="margin: 0px; padding: 0px; width: 100%;">
			<div class="inline-container-Group p-0 mt-3 bg-white">
				<h2 class="grid-title">Listado de Notificaciones</h2>
				<!--<div class="col-sm-12 inline-container-Group">
            <p class="modal-title" style="color: #999; font-size: 15px; margin-bottom: 5px; margin-top: -5px">
                Listado de solicitudes para usuario </p>
        </div>-->
				<div class="table table-hover table-bordered">
					<table class="table table-hover">
						<thead>
							<tr>
								<th></th>
								<th class="text-center">Vizualizar</th>
								<th class="text-center">Fecha Notificación</th>
								<th class="text-center">Nro. Solicitud</th>
								<th class="text-center">Tipo Documento</th>
								<th class="text-center">Destinatario</th>
								<th class="text-center">Nro Documento</th>
								<th class="text-center">Hoja Ruta</th>
								<th class="text-center">Hoja Envio</th>
								<th class="text-center">Correo Electrónico</th>
								<th class="text-center">Órgano Emisor</th>
								<th class="text-center">Estado</th>
								<th class="text-center">Fecha Lectura</th>

								<th class="text-center">Usuario Creación</th>
								<th class="text-center">Fecha Creación</th>
								<th class="text-center">Ip Creación</th>
							</tr>
						</thead>
						<tr
							ng-repeat="item in dataEnviados">
							<td>{{item.numreg}}</td>
							<td class="text-center" ng-click="VerHtml(item.id_casilla)">
								<button class="btn-link"
									style="outline: none; border: none; background-color: transparent;"
									type="button">
									<i class="fa fa-envelope"
										style="color: #b30a14; font-size: 20px;"></i>
								</button>
							</td>


							<td class="text-center"><span
								ng-bind="item.dfec_notificacion | date : 'yyyy/MM/dd'"
								style="display: none"></span>{{item.fec_notificacion}}</td>
						    <td class="text-center">{{item.id_documento}}</td>
							<td class="text-center">{{item.desc_tipo_documento}}</td>
							<td class="text-center">{{item.remitente}}</td>
							<td class="text-center">{{item.nro_documento}}</td>
							<td class="text-center">{{item.hoja_ruta}}</td>
							<td class="text-center">{{item.hoja_envio}}</td>
							<td class="text-center">{{item.correo}}</td>
							<td class="text-center">{{item.desc_oficina}}</td>
							<td class="text-center">{{item.desc_estado}}</td>
							<td class="text-center">{{item.fec_modificacion}}</td>

							<td class="text-center">{{item.usu_creacion}}</td>
							<td class="text-center"><span
								ng-bind="item.dfec_creacion | date : 'yyyy/MM/dd'"
								style="display: none"></span>{{item.fec_creacion}}</td>

							<td class="text-center">{{item.ip_creacion}}</td>

						</tr>
					</table>
				</div>
				<div ng-show="totalItemsNoti > 1" class="mt-3 row">
					<div class="col-md-7">
						<ul class="ml-2 mr-2" uib-pagination previous-text="Anterior"
							next-text="Siguiente" total-items="totalItemsNoti"
							ng-model="currentPageNoti" max-size="maxSize"
							items-per-page="itemsPerPage" class="pagination-sm"
							boundary-link-numbers="true" rotate="false" ng-change="pageChangedNoti()"></ul>
					</div>
				</div>
			</div>

		</div>
	</div>



	</uib-tab> </uib-tabset>



</div>